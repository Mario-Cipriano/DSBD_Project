<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap/css/bootstrap.min.css')}}">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/home.css')}}">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="{{ url_for('static', filename='js/home.js')}}" defer></script>

    <title>Weather App</title>


</head>

<body>

    <nav class="navbar navbar-dark bg-dark">
        <span class="navbar-brand mb-0 h1">MyWeather</span>
        <span class="navbar-text ml-auto mt-4">Email: {{ current_user.email }} </span>
        <a href="/MySubscriptions" class="nav-link text-light">Le mie sottoscrizioni</a>
        <a href="/logout" class="nav-link text-light">Logout</a>
    </nav>

    <div class="container mt-4">
        <div class="row">
            <div class="col-md-12 text-center">
                <h2>Benvenuto {{ current_user.nome }}!!</h2>
            </div>
        </div>
        <div class="row weather-container">
            <div class="col-md-6">
                <div class="weather-form mx-auto">
                    <form id="weatherForm" onsubmit="return sendData()">
                        <div class="form-group">
                            <label for="email"></label>
                            <input type="hidden" class="form-control" name="current_user_email" value="{{ current_user.email }}">
                        </div>
                        <div class="form-group">
                            <label for="city">Città</label>
                            <input type="text" class="form-control" id="city" name="city" placeholder="Inserisci la città" required>
                        </div>
                        <div class="form-group">
                            <label for="countrycode">Paese</label>
                            <input type="text" class="form-control" id="countrycode" name="countrycode" placeholder="Inserisci il paese" required>
                        </div>
                        <div class="form-group">
                            <label for="minTemp">Temperatura Minima (°C)</label>
                            <input type="text" class="form-control" id="minTemp" name="minTemp" placeholder="Inserisci temperatura max" required>
                        </div>
                        <div class="form-group">
                            <label for="maxTemp">Temperatura Massima (°C)</label>
                            <input type="text" class="form-control" id="maxTemp" name="maxTemp" placeholder="Inserisci temperatura min" required>
                        </div>
                        <div class="form-group">
                            <label for="rain">Quantità_pioggia (mm)</label>
                            <input type="text" class="form-control" id="rain" name="rain" placeholder="Inserisci pioggia (mm)" required>
                        </div>
                        <div class="form-group">
                            <label for="snow">Presenza di Neve (sì/no)</label>
                            <select id="snow" name="snow" class="form-control" required>
                                <option value="yes">Yes</option>
                                <option value="no">No</option>
                            </select>
                        </div>

                        <button type="submit" class="btn btn-primary btn-block mx-auto" style="margin: 10px">Save subscriptions</button>

                    </form>
                    <script>
                        $(document).ready(function() {
                            $("#weatherForm").submit(function(event) {
                                alert("Sottoscrizione salvata con successo!");
                            });
                        });
                    </script>

                </div>
            </div>
            <div class="col-md-6">
                <div id="map" style="height: 400px;"></div>
            </div>
        </div>
    </div>






</body>

</html>